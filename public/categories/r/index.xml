<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>R on Philip&#39;s Curve</title>
    <link>/categories/r/</link>
    <description>Recent content in R on Philip&#39;s Curve</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 24 Aug 2018 00:00:00 +0000</lastBuildDate>
    
	    <atom:link href="/categories/r/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Visualising government expenditure data with ggplot2</title>
      <link>/post/visualising-government-expenditure-dat/</link>
      <pubDate>Fri, 24 Aug 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/visualising-government-expenditure-dat/</guid>
      <description>


&lt;p&gt;I thought I’d practice my rusty R skills when I came across a post by Khairil Yusof on the Sinar Project Facebook group that Malaysian Administrative Modernisation and Management Planning Unit (MAMPU) has made data on development expenditure over time available on data.gov.my. I haven’t paid close enough attention to government budgets to have much comments about the trends, but a comment can be found &lt;a href=&#34;https://penanginstitute.org/programmes/penang-institute-in-kuala-lumpur/1038-analysing-malaysias-development-expenditure-in-the-federal-budget-from-2004-to-2018/&#34;&gt;here&lt;/a&gt;. Tl;dr, the authors note that Malaysia’s stagnating development expenditure is concerning since Malaysia is a developing economy.&lt;/p&gt;
&lt;p&gt;My thinking while constructing this plot was to contrast the growth in each category of expenditure against the overall growth in development expenditure over time. I’m thinking about also including the trend in each category of expenditure within each facet.&lt;/p&gt;
&lt;p&gt;Data is obtained from &lt;a href=&#34;http://www.data.gov.my/data/ms_MY/dataset/perbelanjaan-pembangunan-kerajaan-persekutuan/resource/7a5c73ab-7496-4aa6-a924-a1d0e1fff53d&#34;&gt;data.gov.my&lt;/a&gt;. A cleaned version of the data is available &lt;a href=&#34;https://www.dropbox.com/s/m546u01hsf8zvb2/malaysiaDevExp.csv?dl=1&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(readr)
library(tidyverse)
library(here)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;malaysiaDevExp &amp;lt;- read_csv(here(&amp;quot;static&amp;quot;, &amp;quot;data&amp;quot;, &amp;quot;malaysiaDevExp.csv&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Parsed with column specification:
## cols(
##   Year = col_double(),
##   EconomyTotal = col_double(),
##   AgroRuralDev = col_double(),
##   PublicAmenities = col_double(),
##   TradeAndIndustry = col_double(),
##   Transport = col_double(),
##   Connectivity = col_double(),
##   Environment = col_double(),
##   OtherEconomy = col_double(),
##   SocialTotal = col_double(),
##   EducationTraining = col_double(),
##   Health = col_double(),
##   Housing = col_double(),
##   OtherSocial = col_double(),
##   SafetyTotal = col_double(),
##   Defence = col_double(),
##   HomelandSecurity = col_double(),
##   PublicAdmin = col_double(),
##   Total = col_double()
## )&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# create separate dataframe for background totals
malaysiaDevExp %&amp;gt;% 
  select(Year, Value = Total) %&amp;gt;% 
  mutate(Year = as.numeric(Year), 
         Value = Value/1000)-&amp;gt; DevExpTotal

malaysiaDevExp %&amp;gt;%
  # select some columns; rename as needed
  select(Year, 
         Economy = EconomyTotal, 
         Social = SocialTotal, 
         Safety = SafetyTotal, 
         `Public Administration` = PublicAdmin) %&amp;gt;%
  # Year was imported as factor; change this to numeric
  mutate(Year = as.numeric(Year)) %&amp;gt;% 
  gather(ExpCat, Value, -Year) %&amp;gt;% 
  ggplot(aes(x = Year, y = Value/1000)) + 
  # totals in background
  geom_ribbon(data = DevExpTotal, 
              aes(ymin=0, ymax = Value), 
              fill = &amp;#39;gray96&amp;#39;, 
              group = 1) + 
  # line representing each expenditure category, in different colors
  geom_path(group=1, aes(color = ExpCat)) + 
  # separate each expenditure category into facets
  facet_wrap(~ExpCat) + 
  # no legends
  guides(color = FALSE) + 
  # set break points in x-axis 
  scale_x_continuous(breaks = c(1975, 1985, 1995, 2005,2015)) +
  # draw rectangle to highlight that numbers should be treated with caution
  geom_rect(inherit.aes=FALSE, 
            aes(xmin=2017, xmax=2018, ymin=0, ymax=60), 
            color=&amp;quot;transparent&amp;quot;, 
            fill=&amp;quot;lightcoral&amp;quot;, 
            alpha = 0.01) +
  theme_minimal() + 
  theme(panel.grid.major = element_blank(), # remove grid lines
        panel.grid.minor = element_blank(), 
        # bold facet titles
        strip.text = element_text(face = &amp;#39;bold&amp;#39;, color = &amp;#39;gray29&amp;#39;), 
        # format text on ticks
        axis.text = element_text(size = 9, color = &amp;#39;gray45&amp;#39;), 
        # format axis labels
        axis.title = element_text(color = &amp;#39;gray35&amp;#39;),
        # format caption text
        plot.caption = element_text(color = &amp;#39;gray30&amp;#39;)) + 
  labs(title = &amp;quot;Malaysia&amp;#39;s spending on safety and public admin hasn&amp;#39;t grown much&amp;quot;, 
       subtitle = &amp;quot;Strongest growth in development expenditure is in economic and social spending&amp;quot;, 
       y = &amp;quot;RM (&amp;#39;000) million&amp;quot;, 
       caption = &amp;quot;Source: data.gov.my \n2017 data is preliminary data; 2018 data are Budget estimates&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-08-23-visualising-government-expenditure-data-with-ggplot2_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Hello R Markdown</title>
      <link>/post/2015-07-23-r-rmarkdown/</link>
      <pubDate>Thu, 23 Jul 2015 21:13:14 -0500</pubDate>
      
      <guid>/post/2015-07-23-r-rmarkdown/</guid>
      <description>


&lt;div id=&#34;r-markdown&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;R Markdown&lt;/h1&gt;
&lt;p&gt;This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see &lt;a href=&#34;http://rmarkdown.rstudio.com&#34; class=&#34;uri&#34;&gt;http://rmarkdown.rstudio.com&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can embed an R code chunk like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary(cars)
##      speed           dist       
##  Min.   : 4.0   Min.   :  2.00  
##  1st Qu.:12.0   1st Qu.: 26.00  
##  Median :15.0   Median : 36.00  
##  Mean   :15.4   Mean   : 42.98  
##  3rd Qu.:19.0   3rd Qu.: 56.00  
##  Max.   :25.0   Max.   :120.00
fit &amp;lt;- lm(dist ~ speed, data = cars)
fit
## 
## Call:
## lm(formula = dist ~ speed, data = cars)
## 
## Coefficients:
## (Intercept)        speed  
##     -17.579        3.932&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;including-plots&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Including Plots&lt;/h1&gt;
&lt;p&gt;You can also embed plots. See Figure &lt;a href=&#34;#fig:pie&#34;&gt;1&lt;/a&gt; for example:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;par(mar = c(0, 1, 0, 1))
pie(
  c(280, 60, 20),
  c(&amp;#39;Sky&amp;#39;, &amp;#39;Sunny side of pyramid&amp;#39;, &amp;#39;Shady side of pyramid&amp;#39;),
  col = c(&amp;#39;#0292D8&amp;#39;, &amp;#39;#F7EA39&amp;#39;, &amp;#39;#C4B632&amp;#39;),
  init.angle = -50, border = NA
)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;&lt;span id=&#34;fig:pie&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2015-07-23-r-rmarkdown_files/figure-html/pie-1.png&#34; alt=&#34;A fancy pie chart.&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 1: A fancy pie chart.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
